{% extends 'base.html' %}
{% load static %}

{% block title %}Detalle del Producto{% endblock %}

{% block content %}
<section class="detalle-producto">
    <div class="producto-card">
        <!-- Imagen principal del producto -->
        {% if producto.imagen %}
            <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}" class="producto-img">
        {% else %}
            <img src="{% static 'img/default.jpg' %}" alt="{{ producto.nombre }}" class="producto-img">
        {% endif %}

        <!-- Informaci√≥n del producto -->
        <div class="producto-info">
            <h2>{{ producto.nombre }}</h2>
            <p class="descripcion">{{ producto.descripcion }}</p>
            <p class="precio">Precio: <strong>${{ producto.precio }}</strong></p>
            <p class="stock">Stock disponible: {{ producto.stock }}</p>
            <p class="categoria">Categor√≠a: {{ producto.categoria.nombre }}</p>
            <p class="fecha">Publicado el: {{ producto.fecha_creacion|date:"d/m/Y" }}</p>

            <!-- Botones de acci√≥n -->
            <div class="acciones">
                <a href="{% url 'tienda:listado' %}" class="btn volver">‚Üê Volver al cat√°logo</a>
                <!-- üõí Bot√≥n real de carrito -->
                <a href="{% url 'tienda:agregar_carrito' producto.id %}" class="btn comprar">üõí A√±adir al carrito</a>
                <a href="{% url 'tienda:carrito' %}" class="btn carrito">Ver carrito</a>
            </div>

            <!-- Informaci√≥n adicional -->
            <div class="extra-info">
                <p>üöö <strong>Env√≠o:</strong> Disponible en 3-5 d√≠as h√°biles.</p>
                <p>‚úÖ <strong>Garant√≠a:</strong> 1 a√±o de garant√≠a oficial.</p>
                <p>‚≠ê <strong>Valoraciones:</strong> {{ producto.valoracion|default:"Sin rese√±as a√∫n" }}</p>
            </div>
        </div>
    </div>

    <!-- Secci√≥n de productos relacionados -->
    {% if relacionados %}
    <div class="relacionados">
        <h3>Productos relacionados</h3>
        <div class="grid-productos">
            {% for rel in relacionados %}
            <article class="producto">
                {% if rel.imagen %}
                    <img src="{{ rel.imagen.url }}" alt="{{ rel.nombre }}">
                {% else %}
                    <img src="{% static 'img/default.jpg' %}" alt="{{ rel.nombre }}">
                {% endif %}
                <h4>{{ rel.nombre }}</h4>
                <p class="precio">Precio: ${{ rel.precio }}</p>
                <div class="acciones-rel">
                    <a href="{% url 'tienda:detalle' rel.id %}" class="btn">Ver detalles</a>
                    <a href="{% url 'tienda:agregar_carrito' rel.id %}" class="btn btn-carrito">üõí A√±adir</a>
                </div>
            </article>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</section>
{% endblock %}
