{% extends 'base.html' %}
{% load static %}

{% block title %}Bienvenido a la Tienda{% endblock %}

{% block content %}
<section class="tienda-home">
    <div class="intro">
        <h2>Bienvenido a la tienda de ajedrez</h2>
        <p>Explora libros, tableros y accesorios para mejorar tu juego. Todo lo que necesitas para convertirte en un maestro est√° aqu√≠.</p>
        <a href="{% url 'tienda:listado' %}" class="btn">Ver cat√°logo completo</a>
    </div>

    <!-- üîé Buscador r√°pido -->
    <div class="buscador-home">
        <form method="get" action="{% url 'tienda:buscar' %}">
            <input type="text" name="q" placeholder="Buscar productos..." value="{{ request.GET.q }}">
            <button type="submit">Buscar</button>
        </form>
    </div>

    <!-- üìÇ Categor√≠as -->
    {% if categorias %}
    <div class="categorias-home">
        <h3>Categor√≠as principales</h3>
        <ul class="lista-categorias">
            {% for categoria in categorias %}
                <li>
                    <a href="{% url 'tienda:listado' %}?categoria={{ categoria.id }}">
                        {{ categoria.nombre }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <!-- ‚≠ê Productos destacados -->
    <div class="destacados">
        <h3>Productos destacados</h3>
        <div class="grid-productos">
            {% for producto in destacados %}
            <article class="producto">
                {% if producto.imagen %}
                    <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}">
                {% else %}
                    <img src="{% static 'img/default.jpg' %}" alt="{{ producto.nombre }}">
                {% endif %}
                <h4>{{ producto.nombre }}</h4>
                <p>{{ producto.descripcion|truncatewords:15 }}</p>
                <p><strong>Precio:</strong> ${{ producto.precio }}</p>
                <div class="acciones">
                    <a href="{% url 'tienda:detalle' producto.id %}" class="btn">Ver detalles</a>
                    <a href="{% url 'tienda:agregar_carrito' producto.id %}" class="btn btn-carrito">üõí A√±adir</a>
                </div>
            </article>
            {% empty %}
            <p>No hay productos destacados en este momento.</p>
            {% endfor %}
        </div>
    </div>

    <!-- üõí Acceso r√°pido al carrito -->
    <div class="carrito-home">
        <a href="{% url 'tienda:carrito' %}" class="btn btn-carrito">Ver carrito de compras</a>
    </div>
</section>
{% endblock %}

